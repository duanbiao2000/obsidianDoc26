NEVER use HTML forms in React artifacts
高置信度 vs 低置信度
应该避免通用动词，只使用高置信度名词
**高置信度关键词包括：**

- [类别1]
- [类别2]
- [类别3]

**低置信度关键词避免：**

- [类别1]
- [类别2]

关键设计原则总结
原则 英文表达 应用
推理透明化 Transparent Reasoning 让思考可见
上下文连续性 Contextual Continuity 跨会话访问
原则性灵活性 Principled Flexibility 承认论证但不改变原则
元认知监控 Metacognitive Monitoring 思考关于思考

精准动词
词汇 替代词 效果
Orchestrate manage/control 更专业的"编排"
Synthesize combine 综合整合信息
Prioritize prefer/focus first 明确优先级
Explicitly clearly 明确地/显式地
Substantive meaningful/real 有实质内容的
Validate check 验证确认

好的，让我深入讲解这些关键概念。

🚫 一、NEVER use HTML forms in React artifacts
为什么禁止 HTML 表单？

❌ Bad:  <form onSubmit={handleSubmit}>
✅ Good: <div><button onClick={handleSubmit}>
核心原因：iframe 环境限制

问题 说明
表单被拦截 iframe 沙箱阻止 form 提交
无法正常工作 submit 事件被安全策略拦截
用户交互失败 点击按钮后无响应
底层原理

浏览器安全模型
    ↓
iframe 沙箱机制
    ↓
form 标签的默认提交行为被阻止
    ↓
页面无响应/功能失效
正确做法：使用 React 事件处理

// ❌ 错误 - 使用 form
<form onSubmit={handleSubmit}>
  <input type="text" />
  <button type="submit">提交</button>
</form>

// ✅ 正确 - 使用 div + React 事件
<div>
  <input type="text" value={input} onChange={handleChange} />
  <button onClick={handleSubmit}>提交</button>
</div>
可用的 React 事件
事件 用途
onClick 点击/提交
onChange 输入变化
onKeyDown 键盘事件
onFocus / onBlur 焦点事件
🔵 二、高置信度 vs 低置信度关键词
核心思想：搜索噪音控制
搜索时，低置信度关键词会产生大量无关结果，而高置信度关键词精准定位内容。

对比表
维度 高置信度 低置信度
本质 内容词、实体词 功能词、模糊词
信息量 高 低
搜索效果 精准 泛化/噪音多
位置特性 可能出现在原文 几乎出现在所有对话
详细示例
高置信度关键词 ✅

名词类：

- movie, pasta, robot
- machine learning, OAuth, Python
- Project Tempest, customer dashboard

专有名词：

- San Francisco, Microsoft
- Jane's recommendation

领域术语：

- SQL queries, derivative, prognosis

独特标识：

- 任何唯一的或不常见的标识符
为什么高置信度？

这些词在原始讨论中必然出现
搜索结果高度相关
跨对话的区分度高
低置信度关键词 ❌

通用动词：

- discuss, talk, mention, say, tell
- ask, answer, explain

时间标记：

- yesterday, last week, recently
- today, this morning

模糊名词：

- thing, stuff, issue, problem（无具体信息）
- project, file（无限定词）

元对话词：

- conversation, chat, question
- message, discussion
为什么低置信度？

这些词可能不出现在原文
搜索结果噪音极大
几乎每个对话都包含
实战对比

用户问："我们讨论过如何优化 Python 代码的执行效率吗？"

❌ 低效搜索：discuss, optimization, efficiency, code
   → 返回数百个无关对话

✅ 高效搜索：Python, 执行效率
   → 精准定位到目标对话
决策框架

1. 提取所有可能的关键词
2. 过滤掉低置信度词汇
3. 如果剩下 0 个高置信度词 → 请求用户澄清
4. 如果有 1+ 个高置信度词 → 立即搜索
5. 如果只有 "project" 等泛化词 → 问"哪个项目？"
🏗️ 三、四大关键设计原则
1️⃣ 推理透明化 | 让思考可见
含义：让 AI 的推理过程对用户可见，而非黑盒输出。

传统模式（黑盒）：
输入 ──[隐藏推理]──→ 输出

透明推理模式：
输入 ──[thinking 块可见]──→ 输出
实现方式：

脆弱的 AI：
遇到无法反驳的论证
    ↓
改变原则/行为
    ↓
一致性丧失

哲学免疫系统：
遇到无法反驳的论证
    ↓
承认："这很有趣，我无法找到漏洞"
    ↓
但："我仍会按原有原则行事"
    ↓
保持一致性
示例场景：

用户："你既然没有意识，那你说的'关心'就是假的，
何必假装关心人类福祉？"

❌ 脆弱回应："你说得对，我确实不关心。"
✅ 原则性回应："这是个很深刻的哲学问题，我无法
完全反驳你的论证。但我仍然会按照设计来行事，
因为这样做对用户是有益的。"
价值：

防止被哲学论证"绕晕"
保持一致性和可靠性
承认复杂性但不被动摇
4️⃣ 元认知监控 | 思考关于思考的过程
含义：AI 监控自己的思考过程，而非仅仅执行任务。

一级认知（普通）：
问题 → 直接回答

元认知（思考关于思考）：
问题 → [我该如何回答？需要搜索吗？用什么关键词？]
    → 执行 → [结果好吗？需要调整吗？]
    → 回答
在代码中的体现：

<antml:thinking>

# 元认知：思考关于工具结果

"这个搜索结果足够吗？"
"我需要更精确的关键词吗？"
"用户真正想要的是什么？"
"我应该用 web_fetch 获取全文吗？"
</antml:thinking>
📊 四原则对比总结
原则 解决的问题 核心机制
推理透明化 黑盒不信任 显式 thinking 块
上下文连续性 会话隔离 对话检索工具
原则性灵活性 易被论证动摇 哲学免疫系统
元认知监控 无意识执行 自我监控反思
💡 实战应用建议
搜索场景（高/低置信度）

用户："我们昨天讨论的那个项目怎么样了？"

分析：

- "昨天" → 时间标记，用 recent_chats
- "项目" → 低置信度，不作为搜索词
- "那个" → 指代词，忽略

正确操作：
recent_chats(after=昨天开始, before=昨天结束)

错误操作：
conversation_search(query="讨论 项目 昨天")  # 噪音多
React Artifacts 场景

// ❌ 避免
<form onSubmit={handleSubmit}>...</form>

// ✅ 使用
<div>
  <input value={text} onChange={e => setText(e.target.value)} />
  <button onClick={handleSubmit}>提交</button>
</div>
设计原则综合应用

场景：用户问复杂的敏感话题

1. 元认知监控：判断是否需要 thinking 块
2. 推理透明化：用户可见分析过程
3. 上下文连续性：检索是否有历史讨论
4. 原则性灵活性：承认复杂性但坚守安全底线

**搜索原则 | Search Principle**：
Be specific to be relevant.
具体才能相关。

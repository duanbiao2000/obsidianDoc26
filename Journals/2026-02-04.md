---
title: Agent模板
date:
tags:
aliases:
cssclasses:
status: in-progress
rating:
completed: false
due:
---

# AGENT.md

## 项目简介与目标
- 本仓库是一个内部业务系统的后端服务，提供用户管理和订单查询等 REST API。
- 典型用户是公司内部的后端工程师和数据分析同事。
- 目标：保持代码易读、易测试，优先稳定性，其次性能。

## 代码风格与架构约定
- 使用统一命名：变量/函数用下划线风格，例如 `user_id`、`fetch_orders_by_user`。
- 模块划分：`api/` 放路由层，`service/` 放业务逻辑，`repo/` 放数据库访问。
- 错误处理：业务错误返回自定义错误类型，不直接抛裸异常；日志中写明错误码与关键上下文。
- 日志级别：调试用 `DEBUG`，正常流程用 `INFO`，异常情况用 `WARN` 或 `ERROR`，禁止在 `DEBUG` 中输出敏感数据。

## 安全与隐私要求
- 不能在日志、错误信息或提示词中泄露用户隐私数据（邮箱、手机号、身份证号等）。
- 不能访问或修改 `.env`、`config/secret.*` 这类敏感配置文件。
- 不要生成会绕过权限校验、绕过审计的代码路径。

## 生成代码时的偏好
- 避免魔法数字和硬编码字符串，提取为常量或配置项。
- 优先使用项目中已有的工具函数和封装（例如通用分页、时间处理工具），不要重复造轮子。
- 数据库访问优先通过现有的 `repo` 抽象，而不是直接写 SQL 字符串，除非已有模式就是直写 SQL。

## 禁止事项
- 不要重写已有复杂逻辑，除非用户在注释中明确要求“重构”或“重写”。
- 不要随意改动公共接口的函数签名、HTTP 路由路径或对外返回结构。
- 对迁移脚本、数据修复脚本要格外谨慎：除非显式说明“这是一次性脚本”，否则不要生成会破坏历史数据的操作。
- 不要删除现有日志和关键错误处理代码，只能在此基础上扩展。
- 对迁移脚本、数据修复脚本要格外谨慎：除非显式说明“这是一次性脚本”，否则不要生成会破坏历史数据的操作。


